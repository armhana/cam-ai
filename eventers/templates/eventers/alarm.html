{# Copyright (C) 2023 The CAM-AI Team, info@cam-ai.de #}
{# This program is free software; you can redistribute it and/or #}
{# modify it under the terms of the GNU General Public License #}
{# as published by the Free Software Foundation; either version 3 #}
{# of the License, or (at your option) any later version. #}
{# This program is distributed in the hope that it will be useful, #}
{# but WITHOUT ANY WARRANTY; without even the implied warranty of #}
{# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. #}
{# See the GNU General Public License for more details. #}
{# You should have received a copy of the GNU General Public License #}
{# along with this program; if not, write to the Free Software #}
{# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA. #}


<!doctype html>
<html lang="en">
  <head>
    {% if emulatestatic %}
    {% load static %}
      <link rel="shortcut icon" href="{% static 'camai/git/img/favicon.ico' type='image/x-icon' %}">
      <script src="{% static 'camai/nogit/js/jquery-3.5.1.js' %}"></script>
    {% else %}
      <link rel="shortcut icon" href="https://static.cam-ai.de/{{ version }}/camai/git/img/favicon.ico">
      <script src="https://static.cam-ai.de/{{ version }}/camai/nogit/js/jquery-3.5.1.min.js"></script>
    {% endif %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Alarm Configuration</title>
  </head>
  <body>
    <div class="container-fluid float-left">
      <div class="row">
        <div class="col-sm-auto">
          <a href="/" class="btn btn-primary m-2" style="width: 150px;">Back to Main</a>
        </div>
        <div class="col-sm-auto">
          <a href="/oneitem/eventer/{{ school.id }}" class="btn btn-primary m-2" style="width: 150px;">Back to Eventer</a>
        </div>
      </div>
    </div>
    {% if emulatestatic %}
    <h2 class="m-2">Emulating Static Server</h2>
    {% endif %}
    <h2 class="m-2">Alarm configuration</h2>
    
    
    {% if may_write %}
    <div class="accordion" id="accordionExample">
      {% for item in alarms %}
      <div class="accordion-item">
        <h2 class="accordion-header" id="heading{{ item.id }}">
          <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ item.id }}" aria-expanded="true" aria-controls="collapse{{ item.id }}">
            ({{ item.id }}) {{ item.name }} 
          </button>
        </h2>
        <div id="collapse{{ item.id }}" class="accordion-collapse collapse" aria-labelledby="heading{{ item.id }}" data-bs-parent="#accordionExample">
          <div class="accordion-body">
            <div id="item{{ item.id }}">?</div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
    <script>
    {% for item in alarms %}
    $(document).ready(function() {
      $('#item{{ item.id }}').html('{{ item.mendef }}');
      menuobject = JSON.parse('{{ item.mendef|safe }}');
      console.log(menuobject);
    });
    {% endfor %}
    </script>
		{% endif %}		  
				  
  </body>
</html>
